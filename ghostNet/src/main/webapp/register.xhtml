<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      
      >
<h:head>
    <link rel="stylesheet" type="text/css" href="resources/css/login-register.css" />
    <title>Ghost Net Fishing: Registrierung</title>
</h:head>

<h:body>
    <div class="container">
        <h1 class="page-title">Ghost Net Fishing: Registrierung</h1>
        
        <div class="form-container">
            <h:form class="auth-form">
                
                <div class="input-group">
                    <h:outputLabel for="name" value="Benutzername:" class="form-label" />
                    <h:inputText 
                        id="name" 
                        value="#{personenListe.neuePerson.name}" 
                        required="true"
                        requiredMessage="Name ist ein Pflichtfeld."
                        class="form-input" />
                    <h:message for="name" styleClass="error" />
                </div>

                <div class="input-group">
                    <h:outputLabel for="rollentyp" value="Rolle:" class="form-label" />
                    <h:selectOneMenu 
                        id="rollentyp" 
                        value="#{personenListe.neuePerson.rollenTyp}" 
                        required="true"
                        requiredMessage="Bitte wählen Sie eine Rolle aus."
                        class="form-select">
                        <f:selectItem itemLabel="Bitte wählen..." itemValue="" />
                        <f:selectItems 
                            value="#{personenListe.rollenTypen}" 
                            var="rolle"
                            itemLabel="#{rolle}" 
                            itemValue="#{rolle}" />
                    </h:selectOneMenu>
                    <h:message for="rollentyp" styleClass="error" />
                </div>

                <div class="input-group">
                    <h:outputLabel for="passwort" value="Passwort:" class="form-label" />
                    <h:inputSecret 
                        id="passwort" 
                        value="#{personenListe.neuePerson.passwort}" 
                        required="true"
                        requiredMessage="Passwort ist ein Pflichtfeld."
                        class="form-input" />
                    <h:message for="passwort" styleClass="error" />
                </div>

                <div class="input-group">
                    <h:outputLabel for="passwortBestaetigung" value="Passwort bestätigen:" class="form-label" />
                    <h:inputSecret 
                        id="passwortBestaetigung" 
                        value="#{registerController.passwortBestaetigung}"
                        required="true"
                        requiredMessage="Passwort-Bestätigung ist ein Pflichtfeld."
                        class="form-input" />
                    <h:message for="passwortBestaetigung" styleClass="error" />
                </div>

                <div class="input-group">
                    <h:outputLabel for="telefonnummer" value="Telefonnummer:" class="form-label" />
                    <h:inputText 
                        id="telefonnummer" 
                        value="#{personenListe.neuePerson.telefonnummer}"
                        class="form-input" />
                    <h:message for="telefonnummer" styleClass="error" />
                </div>

                <div class="input-group">
                    <h:outputLabel for="bild" value="Bild URL:" class="form-label" />
                    <h:inputText 
                        id="bild" 
                        value="#{personenListe.neuePerson.bild}"
                        class="form-input" />
                    <h:message for="bild" styleClass="error" />
                </div>

                <!-- Zentrale Fehlermeldung -->
                <div class="error-message">
                    <h:outputText value="#{registerController.fehlermeldung}" 
                                  styleClass="error" 
                                  rendered="#{not empty registerController.fehlermeldung}" />
                </div>

                <div class="button-group">
                    <p:commandButton 
                        value="Registrieren"
                        action="#{registerController.registrieren}"
                        update="@form"
                        class="btn btn-primary"
                        default="false" />

                    <h:commandButton 
                        value="Zurück"
                        action="landingpage?faces-redirect=true"
                        immediate="true"
                        class="btn btn-secondary" />
                </div>
                   
            </h:form>
        </div>
    </div>
</h:body>
</html>